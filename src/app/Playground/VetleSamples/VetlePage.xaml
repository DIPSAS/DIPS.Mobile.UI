<?xml version="1.0" encoding="utf-8"?>

<dui:ContentSavePage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
                     xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
                     xmlns:dui="http://dips.com/mobile.ui"
                     xmlns:vetleSamples="clr-namespace:Playground.VetleSamples"
                     x:Class="Playground.VetleSamples.VetlePage"
                     x:DataType="{x:Type vetleSamples:VetlePageViewModel}"
                     BackgroundColor="White"
                     IsSaving="{Binding IsSaving}"
                     SavingText="Saving"
                     x:Name="This">

    <dui:ContentPage.BindingContext>
        <vetleSamples:VetlePageViewModel />
    </dui:ContentPage.BindingContext>

    <dui:ContentPage.ToolbarItems>
        <ToolbarItem IconImageSource="{dui:Icons bell_fill}" />
        <ToolbarItem Text="Test" />
    </dui:ContentPage.ToolbarItems>

    <dui:VerticalStackLayout Padding="20">

        <dui:CollectionView ItemsSource="{Binding TestStrings}"
                            ItemSpacing="5">
            <dui:CollectionView.ItemTemplate>
                <DataTemplate>
                    <!--<ContentView HeightRequest="50"
                                 WidthRequest="50"
                                 BackgroundColor="Red"
                                 dui:Touch.Command="{Binding Source={RelativeSource AncestorType={x:Type vetleSamples:VetlePageViewModel}}, Path=CancelCommand}"
                                 dui:Touch.LongPressCommand="{Binding Source={RelativeSource AncestorType={x:Type vetleSamples:VetlePageViewModel}}, Path=Navigate}">
                        
                    </ContentView>-->
                    <dui:NavigationListItem Command="{Binding Source={x:Reference This}, Path=BindingContext.Navigate}"
                                                    Title="Test"
                                                    dui:ContextMenuEffect.Mode="LongPressed">
                                
                                <dui:ContextMenuEffect.Menu>

                                    <dui:ContextMenu>
                                        <dui:ContextMenuItem Title="Test"
                                                             IsVisible="{Binding Source={x:Reference This}, Path=BindingContext.IsChecked}">

                                        </dui:ContextMenuItem>


                                        <dui:ContextMenuItem
                                            Title="Test2"
                                            Icon="{dui:Icons bell_fill}"
                                            IsVisible="{Binding Source={x:Reference This}, Path=BindingContext.IsChecked, Converter={dui:InvertedBoolConverter}}" />

                                    </dui:ContextMenu>

                                </dui:ContextMenuEffect.Menu>
                                
                            </dui:NavigationListItem>

                </DataTemplate>
            </dui:CollectionView.ItemTemplate>

        </dui:CollectionView>


    </dui:VerticalStackLayout>


</dui:ContentSavePage>