<?xml
    version="1.0"
    encoding="utf-8"?>

<dui:ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
                 xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
                 xmlns:vetleSamples="clr-namespace:Playground.VetleSamples"
                 xmlns:dui="http://dips.com/mobile.ui"
                 x:Class="Playground.VetleSamples.VetlePage"
                 x:DataType="{x:Type vetleSamples:VetlePageViewModel}"
                 Padding="20"
                 x:Name="This">

    <dui:ContentPage.BindingContext>
        <vetleSamples:VetlePageViewModel />
    </dui:ContentPage.BindingContext>
    
    <dui:ContentPage.ToolbarItems>
        <ToolbarItem Text="hei" />
    </dui:ContentPage.ToolbarItems>

    <Grid RowDefinitions="Auto, *">
    <dui:SearchBar x:Name="SearchBar" />
    
    <dui:VirtualListView Adapter="{Binding Adapter}"
                         Grid.Row="1"
                         ViewToUnfocusOnScrolled="{x:Reference SearchBar}"
                         BackgroundColor="Transparent">
        <dui:VirtualListView.ItemTemplate>
            <DataTemplate x:DataType="{x:Type vetleSamples:TestObject2}">
                
                <dui:ListItem Margin="{dui:Thickness Left=size_2, Right=size_2, Top=size_4, Bottom=size_4}" 
                              Icon="{dui:Icons test_tube_line}">
                    <dui:ListItem.TitleOptions>
                        <dui:TitleOptions Width="*">
                            <dui:TitleOptions.FormattedText>
                                <MultiBinding
                                    Converter="{vetleSamples:TextHighlighterConverter FontFamily='Body', ShouldAddEllipsisAtStart=False}">
                                    <Binding Path="Name" />
                                    <Binding Path="SearchTerm" />
                                </MultiBinding>
                            </dui:TitleOptions.FormattedText>
                        </dui:TitleOptions>
                    </dui:ListItem.TitleOptions>
                    
                    <dui:ListItem.InLineContentOptions>
                        <dui:InLineContentOptions Width="Auto" />
                    </dui:ListItem.InLineContentOptions>
                    
                </dui:ListItem>
            </DataTemplate>
        </dui:VirtualListView.ItemTemplate>
    </dui:VirtualListView>
 
    </Grid>
    
        
</dui:ContentPage>