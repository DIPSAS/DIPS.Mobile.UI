<?xml
    version="1.0"
    encoding="utf-8"?>

<dui:ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
                 xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
                 xmlns:vetleSamples="clr-namespace:Playground.VetleSamples"
                 xmlns:dui="http://dips.com/mobile.ui"
                 x:Class="Playground.VetleSamples.VetlePage"
                 x:Name="This"
                 HideSoftInputOnTapped="True">

    <dui:ContentPage.BindingContext>
        <vetleSamples:VetlePageViewModel />
    </dui:ContentPage.BindingContext>

    <Grid RowDefinitions="Auto, Auto, *">
        
        <!--<Grid HeightRequest="100" ColumnSpan="2"></Grid>-->
        
        <dui:SearchBar x:Name="SearchBar" />
        
        <dui:Button Grid.Row="1"
                    Clicked="Button_OnClicked"/>
        
        <!--
        <Grid Row="2"
              ColumnSpan="2"
              HeightRequest="100"></Grid>-->
    
        <dui:RefreshView Grid.Row="2"
                         >
            
        
        <dui:CollectionView2 
                             RemainingItemsThreshold="0"
                             HasAdditionalSpaceAtTheEnd="True"
                            
                            dui:Layout.AutoHideLastDivider="True">
            
            <dui:CollectionView2.ItemsSource>
                <x:Array Type="{x:Type x:String}">
                    <x:String>Test1</x:String>
                    <x:String>Test1</x:String>
                    <x:String>Test1</x:String>
                    <x:String>Test1</x:String>
                    <x:String>Test1</x:String>
                    <x:String>Test1</x:String>
                    <x:String>Test1</x:String>
                    <x:String>Test1</x:String>
                    
                </x:Array>
            </dui:CollectionView2.ItemsSource>
            
            <dui:CollectionView2.CollapsibleElement>
                <dui:CollapsibleElement Element="{Binding Source={x:Reference SearchBar}}" 
                                        InputTransparentOnCollapse="True"/>
            </dui:CollectionView2.CollapsibleElement>
            
            <dui:CollectionView2.ItemTemplate>
                <DataTemplate>
                    <dui:ListItem Title="{Binding .}"
                                  HasBottomDivider="True" />
                </DataTemplate>
            </dui:CollectionView2.ItemTemplate>
            
            <dui:CollectionView2.FooterTemplate>
                <DataTemplate>
                    <Grid RowSpacing="0"
                          RowDefinitions="Auto"
                          Padding="{dui:Thickness Top=size_4, Bottom=size_4}"
                          AutomationId="FooterGrid">

                        <dui:ActivityIndicator Grid.Row="1"
                                               IsRunning="True" />
                    </Grid>
                </DataTemplate>
            </dui:CollectionView2.FooterTemplate>
        </dui:CollectionView2>
        </dui:RefreshView>        
    </Grid>


</dui:ContentPage>